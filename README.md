EventBooker — сервис бронирования с дедлайнами
Когда люди записываются на мероприятия (концерты, мастер-классы, курсы, лекции) — часто возникает ситуация: кто-то бронирует место, но не оплачивает вовремя. Организатору важно не держать такие «мертвые души», а освободить место для других. Поэтому в реальных системах бронирования всегда есть правило: если не оплатил (подтвердил) в течение определенного времени — бронь аннулируется.

В этом задании вы реализуете сервис, который позволяет создавать мероприятия, бронировать места, оплачивать их — и автоматически отменять неоплаченные брони через заданный интервал времени. Это — почти готовое ядро для небольшой регистрационной системы по регистрации

Бронирование не «вечное»: если в течение N минут/часов бронь не оплачена — она автоматически отменяется.  Для этого реализуйте фоновый процесс, который отслеживает время создания брони и удаляет просроченные (используйте очередь или планировщик наподобие cron). Все действия с базой данных должны быть безопасны — используйте транзакции, чтобы избежать гонок данных.

Требования
Сервис должен поддерживать:

встроенные HTTP-методы:
– POST /events — создание мероприятия;
– POST /events/{id}/book — бронирование места;
– POST /events/{id}/confirm — оплата брони (если мероприятие требует этого);
– GET /events/{id} — получение информации о мероприятии и свободных местах.

фоновый обработчик, отменяющий неоплаченные бронирования по истечении срока оплаты (используя очереди или cron-like scheduler)

простой веб-интерфейс, где можно:
– создать мероприятие (форма с названием, датой и количеством мест);
– просматривать список мероприятий и их статус (свободные места, текущие брони);
– забронировать место;
– подтвердить бронь;
– отслеживать, что не подтвержденные брони исчезают после заданного времени;
– по одной странице на пользовательскую и администраторскую части, не обязательно красиво, главное — понятно. Это добавит контекст пользователя и позволит быстро протестировать логику сервиса глазами обычного пользователя в разных ролях.

Дополнительно (будет плюсом):

уведомления пользователей об отмене бронирования через Email или Telegram;

поддержка регистрации нескольких пользователей (и учитывать их в бронированиях);

возможность настраивать разный срок жизни брони для разных мероприятий.


Запуск:

docker compose up --build
В браузере заходим по адресу: http://localhost:8080

####################################### Для проверки работоспособности рассылки - укажите свой email. Проверьте раздел спам. #######################################

Postman запросы: 

Регистрация события: (POST)
1. Post http://localhost:8080/v1/events      (успешный)
   {
   "name": "TechConf 2025",
   "description": "Ежегодная конференция по технологиям",
   "start_time": "2025-11-20T10:00:00Z",
   "end_time": "2025-11-20T18:00:00Z",
   "location": "Москва, Экспоцентр",
   "capacity": 5,
   "payment_timeout_minutes": 5
   }

2.  Post http://localhost:8080/v1/events  (не успешный)
    {
   "name": "BadEvent",
   "start_time": "2025-10-12T10:00:00Z",
   "capacity": 100
   }

3. Post http://localhost:8080/v1/events  (не успешный)
   {
   "description": "Событие без имени",
   "start_time": "2025-12-01T10:00:00Z",
   "end_time": "2025-12-01T18:00:00Z",
   "location": "Москва",
   "capacity": 100,
   "payment_timeout_minutes": 10
   }

Регистрация на событие: (POST)
1. http://localhost:8080/v1/events/1/book (успешный)
   {
   "full_name": "Иван Иванов",
   "email": "ivan@example.com",
   "phone": "+79995553322"
   }
2. http://localhost:8080/v1/events/100/book (не успешный, события нет)
    {
     "full_name": "Иван Иванов",
     "email": "ivan@example.com",
     "phone": "+79995553322"
     }
3. http://localhost:8080/v1/events/1/book (не успешный, не хватает поля)
   {
   "email": "ivan@example.com",
   "phone": "+79995553322"
   }
4. http://localhost:8080/v1/events/1/book (не успешный, неверно указан e-mail)
   {
   "full_name": "Иван Иванов",
   "email": "@example.com",
   "phone": "+79995553322"
   }

Подтверждение регистрации: (POST)       
1. http://localhost:8080/v1/events/1/confirm   (успешный)
   {
   "registration_id" : 1,
   "email": "yakovlevigor99@yandex.ru"
   }
2. http://localhost:8080/v1/events/1999/confirm  (нет указанного id события)
   {
   "registration_id" : 1,
   "email": "yakovlevigor99@yandex.ru"
   }

Просмотр конкретного события + броней admin-mode: (GET)
1. http://localhost:8080/v1/events/1?admin=true  (успешный)
2. http://localhost:8080/v1/events/105?admin=true  (нет такого id мероприятия)

Просмотр конкретного события user-mode: (GET)
1. http://localhost:8080/v1/events/1 (успешный)
2. http://localhost:8080/v1/events/105  (нет такого id мероприятия)

Просмотр списка событий + броней admin-mode: (GET)
http://localhost:8080/v1/events?admin=true

Просмотр списка событий user-mode: (GET)
1. http://localhost:8080/v1/events 
